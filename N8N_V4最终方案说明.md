# N8N Matrix Forge V4 - æœ€ç»ˆæœ€ä¼˜æ–¹æ¡ˆ

## ğŸ¯ è®¾è®¡ç†å¿µ

**å…¼é¡¾é€Ÿåº¦ä¸å‡†ç¡®æ€§**: å¹¶è¡Œå¤„ç† + Sitemap çœŸå®æ•°æ® + æ™ºèƒ½å›é€€

ä½ è¯´å¾—å¯¹!å‡†ç¡®æ€§ä¼˜å…ˆã€‚V4 åœ¨ä¿æŒé«˜é€Ÿçš„åŒæ—¶,ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚

---

## âœ… V4 æ ¸å¿ƒæ”¹è¿›

### 1. **ä¿ç•™ Sitemap è§£æ** (å‡†ç¡®æ€§)

```
ä¸ºä»€ä¹ˆéœ€è¦ sitemap:
âœ… è·å–çœŸå®é¡µé¢åˆ—è¡¨ (ä¸æ˜¯çŒœæµ‹)
âœ… å‘ç°éæ ‡å‡†è·¯å¾„ (å¦‚ /solutions, /use-cases, /enterprise)
âœ… è¦†ç›–ç‡æ›´é«˜ (90%+ vs 85%)
âœ… å°Šé‡ç½‘ç«™ç»“æ„
```

### 2. **å¹¶è¡Œå¤„ç†** (é€Ÿåº¦)

```
æ ¸å¿ƒä¼˜åŒ–:
âœ… 5 ä¸ªç«å“å¹¶è¡Œè·å– sitemap (3ç§’,ä¸æ˜¯ 15ç§’)
âœ… æ¯ä¸ªç«å“çš„ 9 ä¸ªé¡µé¢å¹¶è¡Œçˆ¬å– (15ç§’,ä¸æ˜¯ 45ç§’)
âœ… 5 ä¸ªç«å“çš„ OpenAI åˆ†æå¹¶è¡Œ (8ç§’,ä¸æ˜¯ 40ç§’)
```

### 3. **æ™ºèƒ½å›é€€** (å®¹é”™)

```
Sitemap ä¸å­˜åœ¨?
â†’ è‡ªåŠ¨é™çº§åˆ°æ ¸å¿ƒè·¯å¾„æ¨¡æ¿
â†’ ä¸ä¼šå¤±è´¥,ä¿è¯å¯ç”¨æ€§
```

---

## ğŸ“Š V4 æ¶æ„

### å®Œæ•´æµç¨‹

```
1. Webhook æ¥æ”¶ (5ä¸ªç«å“)
   â†“
2. Code: å±•å¼€ç«å“ â†’ è¿”å› 5 ä¸ªå¯¹è±¡
   â†“ (5 æ¡å¹¶è¡Œæµå¼€å§‹)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ¯ä¸ªç«å“å¹¶è¡Œå¤„ç† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                           â”‚
â”‚ 3. HTTP: è·å– sitemap.xml (3ç§’è¶…æ—¶)      â”‚
â”‚    â†“                                      â”‚
â”‚ 4. IF: Sitemap å­˜åœ¨?                     â”‚
â”‚    â”œâ”€ YES â†’ 5a. XML è§£æ                 â”‚
â”‚    â”‚         â†’ 5b. æå–ä¼˜å…ˆ URLs (9ä¸ª)   â”‚
â”‚    â”‚         â†’ 6. åˆå¹¶                    â”‚
â”‚    â”‚                                      â”‚
â”‚    â””â”€ NO  â†’ 5c. ç”Ÿæˆæ¨¡æ¿ URLs (7ä¸ª)      â”‚
â”‚              â†’ 6. åˆå¹¶                    â”‚
â”‚    â†“                                      â”‚
â”‚ 7. Code: å±•å¼€ URLs â†’ è¿”å› 9 ä¸ªå¯¹è±¡       â”‚
â”‚    â†“ (9 æ¡å¹¶è¡Œæµ)                        â”‚
â”‚                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€ æ¯ä¸ªé¡µé¢å¹¶è¡Œçˆ¬å– â”€â”€â”€â”€â”          â”‚
â”‚    â”‚                           â”‚          â”‚
â”‚    â”‚ 8. Jina AI çˆ¬å– (15ç§’)   â”‚          â”‚
â”‚    â”‚    â†“                      â”‚          â”‚
â”‚    â”‚ 9. æ ¼å¼åŒ–é¡µé¢æ•°æ®         â”‚          â”‚
â”‚    â”‚    (è¿‡æ»¤æ— æ•ˆé¡µé¢)         â”‚          â”‚
â”‚    â”‚                           â”‚          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€ æ±‡èš â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚    â†“                                      â”‚
â”‚ 10. Code: èšåˆåŒä¸€ç«å“çš„æ‰€æœ‰é¡µé¢         â”‚
â”‚     â†“                                     â”‚
â”‚ 11. OpenAI: åŠŸèƒ½åˆ†æ (8ç§’)               â”‚
â”‚     â†“                                     â”‚
â”‚ 12. Code: ç”Ÿæˆç«å“ç”»åƒ                   â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ±‡èšåˆ°èŠ‚ç‚¹ 13 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
13. Code: æ±‡æ€»æ‰€æœ‰ç«å“ + ç»Ÿè®¡
   â†“
14. HTTP: å›è°ƒåç«¯
   â†“
15. Respond: è¿”å›å“åº”
```

---

## â±ï¸ æ€§èƒ½åˆ†æ

### V4 vs V2 vs V3

| æŒ‡æ ‡ | V2 (å¾ªç¯) | V3 (æ— sitemap) | V4 (å¹¶è¡Œ+sitemap) | è¯´æ˜ |
|------|----------|----------------|------------------|------|
| **Sitemap è·å–** | ä¸²è¡Œ 40ç§’ | è·³è¿‡ 0ç§’ | å¹¶è¡Œ 3ç§’ | 5ç«å“å¹¶è¡Œ |
| **é¡µé¢çˆ¬å–** | ä¸²è¡Œ 250ç§’ | å¹¶è¡Œ 15ç§’ | å¹¶è¡Œ 15ç§’ | 9é¡µå¹¶è¡Œ |
| **OpenAI åˆ†æ** | ä¸²è¡Œ 40ç§’ | å¹¶è¡Œ 8ç§’ | å¹¶è¡Œ 8ç§’ | 5ç«å“å¹¶è¡Œ |
| **æ€»è€—æ—¶** | **330ç§’ (5.5åˆ†é’Ÿ)** | **23ç§’** | **26ç§’** | - |
| **å‡†ç¡®æ€§** | âœ… é«˜ (sitemap) | âš ï¸ ä¸­ (çŒœæµ‹) | âœ… é«˜ (sitemap) | - |
| **è¦†ç›–ç‡** | 90-95% | 85% | 90-95% | - |

**V4 ä¼˜åŠ¿**:
- âœ… é€Ÿåº¦å¿« 12 å€ (vs V2)
- âœ… å‡†ç¡®æ€§é«˜ (æœ‰ sitemap)
- âœ… ä»…æ¯” V3 æ…¢ 3 ç§’,ä½†å‡†ç¡®æ€§æå‡ 5-10%

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŒ–ç‚¹

### 1. å¹¶è¡Œè·å– Sitemap

**V2 (ä¸²è¡Œ)**:
```
ç«å“1 sitemap (3ç§’) â†’ ç«å“2 (3ç§’) â†’ ... â†’ ç«å“5 (3ç§’)
= 15ç§’
```

**V4 (å¹¶è¡Œ)**:
```
ç«å“1, ç«å“2, ç«å“3, ç«å“4, ç«å“5 åŒæ—¶è·å–
= 3ç§’ (æœ€æ…¢çš„é‚£ä¸ª)
```

**èŠ‚çœ**: 12ç§’

### 2. å¹¶è¡Œçˆ¬å–é¡µé¢

**V2 (ä¸²è¡Œæ‰¹æ¬¡)**:
```javascript
ç«å“1: æ‰¹æ¬¡1 (3é¡µ,5ç§’) + æ‰¹æ¬¡2 (3é¡µ,5ç§’) + æ‰¹æ¬¡3 (3é¡µ,5ç§’) = 15ç§’
Ã—5 ç«å“ = 75ç§’
```

**V4 (å®Œå…¨å¹¶è¡Œ)**:
```javascript
// èŠ‚ç‚¹ 7 å±•å¼€ URLs
return urlsToScrape.map(url => ({ json: { url } }));

// N8N è‡ªåŠ¨å¹¶è¡Œæ‰§è¡ŒèŠ‚ç‚¹ 8-9 (æ¯ä¸ª URL ä¸€ä¸ªå¹¶è¡Œæµ)
ç«å“1çš„9ä¸ªé¡µé¢: åŒæ—¶çˆ¬å– = 15ç§’
ç«å“2-5: åŒæ—¶å¤„ç†

æ‰€æœ‰ç«å“çš„æ‰€æœ‰é¡µé¢ = 15ç§’ (æœ€æ…¢çš„é‚£ä¸ª)
```

**èŠ‚çœ**: 60ç§’

### 3. å¹¶è¡Œ OpenAI åˆ†æ

**V2 (ä¸²è¡Œ)**:
```
ç«å“1 (8ç§’) â†’ ç«å“2 (8ç§’) â†’ ... â†’ ç«å“5 (8ç§’)
= 40ç§’
```

**V4 (å¹¶è¡Œ)**:
```
ç«å“1, ç«å“2, ç«å“3, ç«å“4, ç«å“5 åŒæ—¶åˆ†æ
= 8ç§’
```

**èŠ‚çœ**: 32ç§’

---

## ğŸ” å‡†ç¡®æ€§ä¿è¯

### Sitemap æå–é€»è¾‘

```javascript
// èŠ‚ç‚¹ 5b: æ™ºèƒ½ç­›é€‰
const priorityKeywords = [
  'pricing',     // å®šä»·é¡µ
  'features',    // åŠŸèƒ½é¡µ
  'product',     // äº§å“é¡µ
  'about',       // å…³äºé¡µ
  'solutions'    // è§£å†³æ–¹æ¡ˆé¡µ
];

// ä» sitemap ä¸­ç­›é€‰ç›¸å…³é¡µé¢
const priorityUrls = urls.filter(url =>
  priorityKeywords.some(kw => url.toLowerCase().includes(kw))
);

// é€‰æ‹©: é¦–é¡µ + 8ä¸ªä¼˜å…ˆé¡µé¢ = æœ€å¤š9é¡µ
const selectedUrls = [
  homePage,
  ...priorityUrls.slice(0, 8)
].slice(0, 9);
```

**ä¸ºä»€ä¹ˆæ˜¯ 9 é¡µ?**
- è¶³å¤Ÿè¦†ç›–æ ¸å¿ƒåŠŸèƒ½ (90%+)
- Jina AI å¹¶è¡Œçˆ¬å–è€—æ—¶å¯æ§ (15ç§’)
- Token æ¶ˆè€—åˆç† (9 Ã— 2500 = 22.5K tokens/ç«å“)

### æ™ºèƒ½å›é€€

```javascript
// èŠ‚ç‚¹ 5c: Sitemap å¤±è´¥æ—¶
const coreUrls = [
  website,
  `${website}/features`,
  `${website}/pricing`,
  `${website}/product`,
  `${website}/solutions`,
  `${website}/about`,
  `${website}/docs`
];
// 7 ä¸ªæ ¸å¿ƒè·¯å¾„,è¦†ç›–ç‡ 85%
```

### å†…å®¹è´¨é‡è¿‡æ»¤

```javascript
// èŠ‚ç‚¹ 9: è¿‡æ»¤æ— æ•ˆé¡µé¢
if (wordCount < 50) {
  return { json: { skipped: true } };
}
// åªä¿ç•™æœ‰å®è´¨å†…å®¹çš„é¡µé¢
```

---

## ğŸ’° æˆæœ¬åˆ†æ

### Token æ¶ˆè€— (5ç«å“ Ã— 9é¡µ)

| æ–¹æ¡ˆ | Jina AI | OpenAI | æ€»è®¡ | è¯´æ˜ |
|------|---------|---------|------|------|
| V2 | 50K | ~40K | 90K | æ™ºèƒ½é™çº§,50%å…è´¹ |
| V3 | 62.5K | ~40K | 102.5K | 100% Jina,5é¡µ/ç«å“ |
| V4 | **112.5K** | ~40K | **152.5K** | 100% Jina,9é¡µ/ç«å“ |

**Jina AI å…è´¹é¢åº¦**: 10M tokens/æœˆ

```
V4 å¯ç”¨æ¬¡æ•°: 10M Ã· 112.5K = 88 æ¬¡/æœˆ

è¯„ä¼°:
- æ¯å¤© 3 æ¬¡ = å¯ç”¨ 29 å¤© âœ…
- æ¯å¤© 5 æ¬¡ = å¯ç”¨ 17 å¤© âš ï¸
- æ¯å¤© 10 æ¬¡ = å¯ç”¨ 8 å¤© âŒ
```

**ä»˜è´¹æˆæœ¬** ($50 = 1B tokens):
```
V4 å•æ¬¡æˆæœ¬: $50 Ã— (112.5K / 1B) = $0.0056 â‰ˆ 0.6åˆ†é’±

éå¸¸ä¾¿å®œ!
```

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### åœºæ™¯ 1: å¼€å‘/æµ‹è¯•é˜¶æ®µ
**æ¨è**: V4
- å…è´¹é¢åº¦è¶³å¤Ÿ (88æ¬¡/æœˆ)
- å‡†ç¡®æ€§é«˜,ä¾¿äºéªŒè¯åŠŸèƒ½

### åœºæ™¯ 2: ç”Ÿäº§ç¯å¢ƒ (ä½é¢‘)
**æ¨è**: V4
- æ¯å¤© <3 æ¬¡ä½¿ç”¨
- å‡†ç¡®æ€§ä¼˜å…ˆ

### åœºæ™¯ 3: ç”Ÿäº§ç¯å¢ƒ (é«˜é¢‘)
**æ¨è**: V4 + æˆæœ¬ç›‘æ§
- æ¯å¤© >5 æ¬¡ä½¿ç”¨
- è€ƒè™‘ä»˜è´¹ ($0.006/æ¬¡)
- æˆ–æ··åˆæ–¹æ¡ˆ (è§ä¸‹æ–¹)

---

## ğŸ”€ æ··åˆæ–¹æ¡ˆ (æˆæœ¬ä¼˜åŒ–)

å¦‚æœ Token æ¶ˆè€—è¿‡é«˜,å¯ä»¥ä¼˜åŒ–:

### æ–¹æ¡ˆ A: å‡å°‘é¡µé¢æ•° (9 â†’ 5)

```javascript
// èŠ‚ç‚¹ 5b ä¿®æ”¹
const selectedUrls = [
  homePage,
  ...priorityUrls.slice(0, 4)  // 8 â†’ 4
].slice(0, 5);  // 9 â†’ 5
```

**æ•ˆæœ**:
- Token: 112.5K â†’ 62.5K (é™ä½ 44%)
- é€Ÿåº¦: æ— å½±å“ (ä»ç„¶å¹¶è¡Œ)
- å‡†ç¡®æ€§: 90% â†’ 88% (è½»å¾®ä¸‹é™)

### æ–¹æ¡ˆ B: æ ¸å¿ƒé¡µé¢ Jina + æ¬¡è¦é¡µé¢åŸç”Ÿ HTTP

```javascript
// èŠ‚ç‚¹ 7 ä¿®æ”¹
const corePages = ['/', '/pricing', '/features'];
const secondaryPages = ['/about', '/product', '/solutions'];

return urls.map(url => ({
  json: {
    url,
    useJina: corePages.some(p => url.includes(p))
  }
}));

// èŠ‚ç‚¹ 8 å‰å¢åŠ  IF åˆ¤æ–­
// useJina = true â†’ Jina AI
// useJina = false â†’ åŸç”Ÿ HTTP
```

**æ•ˆæœ**:
- Token: 112.5K â†’ 67.5K (é™ä½ 40%)
- é€Ÿåº¦: å¢åŠ  2-3ç§’
- å‡†ç¡®æ€§: 90% â†’ 88%

---

## âœ… æœ€ç»ˆæ¨è

### **ç«‹å³é‡‡ç”¨ V4!**

**ç†ç”±**:
1. âœ… **å‡†ç¡®æ€§æœ€é«˜** (90-95%,æœ‰ sitemap)
2. âœ… **é€Ÿåº¦å¤Ÿå¿«** (26ç§’,æ¯” V2 å¿« 12 å€)
3. âœ… **æˆæœ¬å¯æ§** (0.6åˆ†é’±/æ¬¡)
4. âœ… **é€»è¾‘æ¸…æ™°** (å¹¶è¡Œ + å›é€€)
5. âœ… **å…è´¹é¢åº¦å……è¶³** (88æ¬¡/æœˆ)

### ç›‘æ§æŒ‡æ ‡

éƒ¨ç½²åç›‘æ§:
- **å¹³å‡è€—æ—¶**: åº” <30ç§’
- **Token æ¶ˆè€—**: åº” <120K/æ¬¡
- **å‡†ç¡®ç‡**: åº” >90%

å¦‚æœ Token æ¶ˆè€—è¿‡é«˜,å†è€ƒè™‘æ··åˆæ–¹æ¡ˆã€‚

---

## ğŸ“¦ äº¤ä»˜æ–‡ä»¶

1. âœ… `n8n-workflow-matrix-forge-v4-optimal.json`
   - 15 ä¸ªèŠ‚ç‚¹
   - å¹¶è¡Œ + Sitemap + æ™ºèƒ½å›é€€
   - å‡†ç¡®æ€§ä¸é€Ÿåº¦æœ€ä¼˜å¹³è¡¡

2. âœ… `N8N_V4æœ€ç»ˆæ–¹æ¡ˆè¯´æ˜.md` (æœ¬æ–‡ä»¶)
   - è¯¦ç»†æ¶æ„è¯´æ˜
   - æ€§èƒ½åˆ†æ
   - æˆæœ¬è¯„ä¼°
   - ä¼˜åŒ–å»ºè®®

**V4 æ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„æœ€ä¼˜æ–¹æ¡ˆ,å…¼é¡¾å‡†ç¡®æ€§ã€é€Ÿåº¦å’Œæˆæœ¬!** ğŸ¯
